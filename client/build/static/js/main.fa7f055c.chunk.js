(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{56:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(13),o=n.n(a),c=n(14),s=n(23),i=n(22),d=n(7),u={foods:[],loading:!1,error:!1},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOODS-LOADED":return Object(d.a)(Object(d.a)({},e),{},{foods:t.payload,loading:!1,error:!1});case"FOODS-REQUESTED":return Object(d.a)(Object(d.a)({},e),{},{loading:!0,error:!1});case"FOODS-ERROR":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:!0});case"FOODS-UPDATE":var n=e.foods.findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return Object(d.a)(Object(d.a)({},e),{},{foods:[].concat(Object(i.a)(e.foods.slice(0,n)),[t.payload],Object(i.a)(e.foods.slice(n+1)))});case"FOODS-ADD":return Object(d.a)(Object(d.a)({},e),{},{foods:[].concat(Object(i.a)(e.foods),[t.payload])});case"FOODS-DEL":var r=e.foods.findIndex((function(e){return e.id.toString()===t.payload.toString()}));return Object(d.a)(Object(d.a)({},e),{},{foods:[].concat(Object(i.a)(e.foods.slice(0,r)),Object(i.a)(e.foods.slice(r+1)))});default:return Object(d.a)({},e)}},j=Object(s.a)((function(e){return function(t){return function(n){console.group("action",n.type),console.log("prev state",e.getState()),console.log("action",n);var r=t(n);return console.log("next state",e.getState()),console.groupEnd(),r}}})),b=Object(s.c)(l,j),f=function(e){return{type:"FOODS-LOADED",payload:e}},O=function(){return{type:"FOODS-REQUESTED"}},p=function(){return{type:"FOODS-ERROR"}},h=n(11),m=n(19),x=n(16),v=n.n(x),g=n(27),y=function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/foods");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("server error");case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/foods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/foods",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(201===(n=e.sent).status){e.next=5;break}throw new Error("the card has not been updated");case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/foods/"+t,{method:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=n(64),w=n(65),N=n(60),R=n(68),k=n(61),L=n(3),F=Object(c.b)((function(e){return{foods:e.foods}}),{foodsError:p,foodsRequested:O,foodsLoaded:f})((function(e){var t=e.show,n=e.handleClose,a=e.foodsError,o=e.foods,c=e.foodsLoaded,s=e.foodsRequested,i=Object(r.useState)(!1),u=Object(h.a)(i,2),l=u[0],j=u[1],b=Object(r.useState)(!1),f=Object(h.a)(b,2),O=f[0],p=f[1],x=Object(r.useState)({title:"",img:"",price:"",description:""}),v=Object(h.a)(x,2),g=v[0],C=v[1],D=g.title,F=g.img,T=g.price,q=g.description,U=function(e){j(!1),C(Object(d.a)(Object(d.a)({},g),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(L.jsxs)(E.a,{show:t,onHide:n,children:[Object(L.jsx)(E.a.Header,{closeButton:!0,children:Object(L.jsx)(E.a.Title,{children:"Add new hot-dog"})}),Object(L.jsx)(E.a.Body,{children:Object(L.jsxs)(w.a,{validated:l,onSubmit:function(e){if(e.preventDefault(),j(!1),p(!0),o.find((function(e){return e.title.trim().toLowerCase()===g.title.trim().toLowerCase()})))return j(!0),void p(!1);S(g).then((function(e){n(),s(),p(!1),C({title:"",img:"",price:"",description:""}),y().then((function(e){c(e)})).catch((function(e){return a()}))})).catch((function(e){return a()}))},children:[Object(L.jsx)(w.a.Control,{className:"mb-2",placeholder:"Img URL",onChange:U,name:"img",type:"text",value:F}),Object(L.jsxs)(w.a.Group,{children:[Object(L.jsx)(w.a.Control,{isInvalid:l,required:!0,className:"mb-2",placeholder:"Title",onChange:U,name:"title",type:"text",value:D}),Object(L.jsx)(w.a.Control.Feedback,{type:"invalid",children:"This title already exists"})]}),Object(L.jsx)(w.a.Control,{required:!0,className:"mb-2",placeholder:"Price",onChange:U,name:"price",type:"number",value:T}),Object(L.jsx)(w.a.Control,{className:"mb-2",placeholder:"Description",onChange:U,name:"description",as:"textarea",value:q}),Object(L.jsxs)(N.a,{"aria-label":"Basic example",children:[Object(L.jsx)(R.a,{onClick:n,type:"button",className:"mt-1",variant:"secondary",children:"No thanks!"}),Object(L.jsxs)(R.a,{disabled:O,type:"submit",className:"mt-1",variant:"dark",children:["Add  ",O?Object(L.jsx)(k.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):""]})]})]})})]})})),T=n(66),q=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(F,{show:n,handleClose:function(){return a(!1)}}),Object(L.jsxs)(T.a,{className:"d-flex justify-content-between",bg:"dark",variant:"dark",children:[Object(L.jsx)(T.a.Brand,{children:"CRUD"}),Object(L.jsx)(R.a,{onClick:function(){return a(!0)},variant:"outline-light",children:"Add hot-dog"})," "]})]})},U=function(){return Object(L.jsx)("h1",{children:"Error..."})},A=n(67),I=Object(c.b)((function(e){return{foods:e.foods}}),{foodUpdate:function(e){return{type:"FOODS-UPDATE",payload:e}},foodDel:function(e){return{type:"FOODS-DEL",payload:e}},foodsLoaded:f,foodsRequested:O,foodsError:p})((function(e){var t=Object(r.useState)(!1),n=Object(h.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(!1),s=Object(h.a)(c,2),i=s[0],u=s[1],l=Object(r.useState)(!1),j=Object(h.a)(l,2),b=j[0],f=j[1],O=Object(r.useState)(!1),p=Object(h.a)(O,2),x=p[0],v=p[1],g=Object(r.useState)({title:e.title,price:e.price,img:e.img,description:e.description,id:e.id}),S=Object(h.a)(g,2),E=S[0],N=S[1],F=E.title,T=E.img,q=E.price,U=E.description,I=E.id,B=function(e){o(!1),N(Object(d.a)(Object(d.a)({},E),{},Object(m.a)({},e.target.name,e.target.value)))},P=Object(L.jsxs)(A.a.Body,{className:"body-card",children:[Object(L.jsx)(A.a.Title,{children:F}),Object(L.jsx)(A.a.Subtitle,{className:"mb-2 text-muted",children:"".concat(q,"$")}),Object(L.jsx)(A.a.Text,{className:"mb-5",children:U}),Object(L.jsx)(R.a,{onClick:function(){u(!0)},className:"w-100 button-card",variant:"secondary",children:"Edit"})]}),J=Object(L.jsxs)(w.a,{validated:a,onSubmit:function(t){if(t.preventDefault(),f(!0),o(!1),e.foods.find((function(e){return e.title.trim().toLowerCase()===E.title.trim().toLowerCase()&&e.id!==E.id})))return o(!0),void f(!1);C(E).then((function(t){u(!1),f(!1),e.foodsRequested(),y().then((function(t){return e.foodsLoaded(t)})).catch((function(t){return e.foodsError()}))})).catch((function(e){console.log(e),f(!1)}))},children:[Object(L.jsx)(w.a.Control,{onChange:B,name:"img",type:"text",value:T}),Object(L.jsx)(w.a.Control,{isInvalid:a,onChange:B,name:"title",type:"text",value:F}),Object(L.jsx)(w.a.Control.Feedback,{type:"invalid",children:"This title already exists"}),Object(L.jsx)(w.a.Control,{onChange:B,name:"price",type:"number",value:q}),Object(L.jsx)(w.a.Control,{onChange:B,name:"description",as:"textarea",value:U}),Object(L.jsx)(w.a.Control,{name:"id",type:"hidden",value:I}),Object(L.jsxs)(R.a,{disabled:b,type:"submit",className:"w-100 mt-1",variant:"secondary",children:["Update ",b?Object(L.jsx)(k.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):""]}),Object(L.jsxs)(R.a,{onClick:function(){return function(t){v(!0),D(t).then((function(t){e.foodsRequested(),y().then((function(t){return e.foodsLoaded(t)})).catch((function(t){return e.foodsError()}))})).catch((function(e){console.log(e),v(!1)}))}(I)},type:"button",className:"w-100 mt-1",variant:"secondary",children:["Delete ",x?Object(L.jsx)(k.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):""]})]}),z=i?J:P;return Object(L.jsx)("div",{className:"d-flex",children:Object(L.jsxs)(A.a,{className:"mr-3 ml-3 mt-3",style:{width:"18rem"},children:[Object(L.jsx)(A.a.Img,{style:{minHeight:"250px"},variant:"top",src:T}),z]})})})),B=Object(c.b)((function(e){return{foods:e.foods,loading:e.loading,error:e.error}}))((function(e){var t=e.foods,n=e.loading,r=e.error,a=t.map((function(e){return Object(L.jsx)(I,{title:e.title,img:e.img,price:e.price,description:e.description,id:e.id},e.id)})),o=r?Object(L.jsx)(U,{}):a;return Object(L.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:n?Object(L.jsx)(k.a,{className:"spin",animation:"border",variant:"secondary"}):o})})),P=n(62),J=n(63);var z=Object(c.b)(null,{foodsLoaded:f,foodsRequested:O,foodsError:p})((function(e){var t=e.foodsLoaded,n=e.foodsRequested;return Object(r.useEffect)((function(){n(),y().then((function(e){return t(e)})).catch((function(e){return{type:"FOODS-ERROR"}}))}),[t,n]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(q,{}),Object(L.jsx)(P.a,{className:"jambo",children:Object(L.jsx)(J.a,{children:Object(L.jsx)(B,{})})})]})}));n(56),n(57);o.a.render(Object(L.jsx)(c.a,{store:b,children:Object(L.jsx)(z,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.fa7f055c.chunk.js.map